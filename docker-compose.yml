version: '3'
services:
  mongo:
    image: mongo:3.6.2
    ports:
      - '27019:27017'
    volumes:
      - ./server/dump:/dump
  server:
    build: ./server
    command: ['npm', 'start']
    volumes:
      - ./server:/app
      - ./server/node_modules:/app/node_modules
    ports:
      - '4000:4000'
    depends_on:
      - mongo
  admin:
    build: ./admin
    command: ['npm', 'start']
    volumes:
      - ./admin:/app
      - ./admin/node_modules:/app/node_modules
    ports:
      - '8080:8080'
    depends_on:
      - mongo